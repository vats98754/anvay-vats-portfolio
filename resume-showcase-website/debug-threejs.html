<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three.js Debug Test</title>
    <style>
        body { 
            margin: 0; 
            padding: 0; 
            background: #000; 
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        #debug {
            position: fixed;
            top: 10px;
            left: 10px;
            color: white;
            background: rgba(0,0,0,0.8);
            padding: 10px;
            z-index: 1000;
            font-size: 14px;
        }
        #canvas-container {
            width: 100vw;
            height: 100vh;
            position: relative;
        }
        canvas {
            display: block;
            background: #001122;
        }
    </style>
</head>
<body>
    <div id="debug">
        <div>Three.js Status: <span id="status">Loading...</span></div>
        <div>Scene Objects: <span id="objects">0</span></div>
        <div>Render Count: <span id="renders">0</span></div>
    </div>
    
    <div id="canvas-container">
        <canvas id="threejs-canvas"></canvas>
    </div>

    <script src="https://unpkg.com/three@0.155.0/build/three.min.js"></script>
    <script>
        let renderCount = 0;
        let scene, camera, renderer, cube, cube2;
        
        function updateDebug(id, text) {
            const el = document.getElementById(id);
            if (el) el.textContent = text;
        }
        
        function init() {
            console.log('🚀 Starting Three.js debug test');
            
            // Check if Three.js is loaded
            if (typeof THREE === 'undefined') {
                updateDebug('status', '❌ Three.js not loaded');
                console.error('THREE.js is not available');
                return;
            }
            
            updateDebug('status', '✅ Three.js v' + THREE.REVISION);
            console.log('✅ Three.js available, version:', THREE.REVISION);
            
            // Get canvas
            const canvas = document.getElementById('threejs-canvas');
            if (!canvas) {
                console.error('❌ Canvas not found');
                return;
            }
            
            // Scene setup
            scene = new THREE.Scene();
            
            // Camera setup
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 5;
            
            // Renderer setup
            renderer = new THREE.WebGLRenderer({ 
                canvas: canvas,
                antialias: true 
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0x001122);
            
            // Create a bright red cube
            const geometry1 = new THREE.BoxGeometry(1, 1, 1);
            const material1 = new THREE.MeshBasicMaterial({ color: 0xff0000 });
            cube = new THREE.Mesh(geometry1, material1);
            cube.position.x = -2;
            scene.add(cube);
            
            // Create a bright green wireframe cube
            const geometry2 = new THREE.BoxGeometry(1, 1, 1);
            const material2 = new THREE.MeshBasicMaterial({ 
                color: 0x00ff00,
                wireframe: true 
            });
            cube2 = new THREE.Mesh(geometry2, material2);
            cube2.position.x = 2;
            scene.add(cube2);
            
            // Add some lights
            const light = new THREE.AmbientLight(0x404040, 2);
            scene.add(light);
            
            console.log('✅ Scene created with', scene.children.length, 'objects');
            updateDebug('objects', scene.children.length);
            
            // Start animation
            animate();
        }
        
        function animate() {
            requestAnimationFrame(animate);
            
            // Rotate cubes
            if (cube) {
                cube.rotation.x += 0.01;
                cube.rotation.y += 0.01;
            }
            
            if (cube2) {
                cube2.rotation.x += 0.02;
                cube2.rotation.y += 0.02;
            }
            
            // Render
            renderer.render(scene, camera);
            
            renderCount++;
            if (renderCount % 60 === 0) {  // Update every 60 frames
                updateDebug('renders', renderCount);
                console.log('🎬 Rendered', renderCount, 'frames');
            }
        }
        
        // Handle window resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
        
        // Start when page loads
        document.addEventListener('DOMContentLoaded', () => {
            console.log('📄 DOM loaded, initializing...');
            setTimeout(init, 100);  // Small delay to ensure everything is ready
        });
    </script>
</body>
</html>
